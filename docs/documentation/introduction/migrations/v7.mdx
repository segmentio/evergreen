# Evergreen v7 Migration Guide

Evergreen v7 is primarily a maintenance release focusing on stability and simplicity. The most notable change in this release in the removal of `glamor` as a fallback css-in-js solution to `ui-box`. Glamor has not been maintained in a number of years, and we're finally able to close out some long-standing security vulnerability issues reported through this dependency - [#1304](https://github.com/segmentio/evergreen/issues/1304), [#1552](https://github.com/segmentio/evergreen/issues/1552), [#1146](https://github.com/segmentio/evergreen/issues/1146), [#1519](https://github.com/segmentio/evergreen/issues/1519), [#1533](https://github.com/segmentio/evergreen/issues/1533), and so on.

While there should be no significant visual changes introduced with this change, there was a large internal refactoring ([#1554](https://github.com/segmentio/evergreen/issues/1554)) to swap component themes and internal styles to use the updated `ui-box` functionality to replace `glamor`.

# Component themes now define pseudoselectors under selectors key {#selectors}

[`ui-box@5.2.0`](https://github.com/segmentio/ui-box/releases/tag/v5.2.0) introduced the ability to define selectors for a `Box` component. Since a `Box` component can be polymorphic and accept arbitrary props, we needed a way to determine what props were meant to define hover, active, focus, etc. states. See the [`selectors`](https://github.com/segmentio/ui-box#selectors) section in the `ui-box` readme for more information.

<InlineAlert>
  If you were using Evergreen v6 without a custom theme, or you weren't overriding any pseudoselectors, you shouldn't
  need to make any changes here.
</InlineAlert>

Any pseudoselectors defined in a custom theme will need to be moved under a `selectors` object, for example:

```diff readonly
const baseStyle = {
  outline: 'none',
  textDecoration: 'none',
  display: 'flex',
  position: 'relative',
  paddingX: 12,

+  selectors: {
    _isSelectable: {
      cursor: 'pointer'
    },

    _disabled: {
      cursor: 'not-allowed',
      userSelect: 'none'
    }
+  }
}
```

# No more classic theme {#classic-theme}

The classic theme was maintained in v6 to allow consumers to upgrade without forcing an entirely new look-and-feel. However, there were some missed components ([#1511](https://github.com/segmentio/evergreen/issues/1511)), and new components like the [`FileUploader`](/components/file-uploader) were not retrofitted for the old visual style.

Taking into account the refactoring effort for the `selectors` object and v6 being out for close to 2 years now, we think it's time to sunset the classic theme in favor of our modern design.

```diff readonly
import React from 'react'
-import { classicTheme, ThemeProvider } from 'evergreen-ui'
+import { defaultTheme, ThemeProvider } from 'evergreen-ui'

const App: React.FC = (props) => {
  const { children } = props
-  return <ThemeProvider value={classicTheme}>{children}</ThemeProvider>
+  return <ThemeProvider value={defaultTheme}>{children}</ThemeProvider>
}
```
